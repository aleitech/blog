(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{404:function(s,t,a){s.exports=a.p+"assets/img/MTMxMDI3MDI1MTY4MjgxODI_145461_EG3DI1-yjCVHUTCj_1671523874.21f8e745.png"},405:function(s,t,a){s.exports=a.p+"assets/img/MTMxMDI3MDI1MTY4MjgxODI_557402_tAr36pqOQj1xiL85_1671524240.7b83b178.png"},406:function(s,t,a){s.exports=a.p+"assets/img/MTMxMDI3MDI1MTY4MjgxODI_288228_1Xar_2TdZWq8Jg___1671524444.abefd843.png"},557:function(s,t,a){"use strict";a.r(t);var r=a(0),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"起因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#起因"}},[s._v("#")]),s._v(" "),t("strong",[s._v("起因")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("某项目扫描工单系统漏洞，发现网站根目录下的package.json可被访问，存在风险。要求修复。如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(404),alt:"img"}})])]),s._v(" "),t("li",[t("p",[s._v("所以在nginx上做了屏蔽")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" location = /package.json {\n        return 404;\n }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:a(405),alt:"img"}})]),s._v(" "),t("h2",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" "),t("strong",[s._v("问题")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("package.json中的参数，version是有作用的。现在屏蔽掉，会不会有严重影响？")])]),s._v(" "),t("li",[t("p",[s._v("前端静态资源文件，依赖version解决缓存问题")]),s._v(" "),t("p",[t("img",{attrs:{src:a(406),alt:"img"}})])])]),s._v(" "),t("h2",{attrs:{id:"疑惑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#疑惑"}},[s._v("#")]),s._v(" "),t("strong",[s._v("疑惑")])]),s._v(" "),t("ul",[t("li",[s._v("实践证明，即使nginx屏蔽不能访问package.json了，前端静态文件的版本号，依然正常工作")]),s._v(" "),t("li",[s._v("为什么呢？浏览器访问不到了，js如何渲染，难道是js服务端渲染？")])]),s._v(" "),t("h2",{attrs:{id:"解惑"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解惑"}},[s._v("#")]),s._v(" "),t("strong",[s._v("解惑")])]),s._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://cn.vuejs.org/guide/scaling-up/ssr.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务端渲染 (SSR) | Vue.js (vuejs.org)"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("通读js服务端渲染的原理，基于node.js，和其他后端语言的服务能力一样，服务端生成静态文件，返回给前端")])]),s._v(" "),t("li",[t("p",[s._v("我们的网站部署在nginx下面，没有用到node.js引擎，不存在服务端渲染")])]),s._v(" "),t("li",[t("p",[s._v("继续探究前端是如何实现版本号的\n"),t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/2047177?from=15425",target:"_blank",rel:"noopener noreferrer"}},[s._v("gulp之自动化静态资源压缩合并加版本号 - 腾讯云开发者社区-腾讯云"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("答案：前端在编译阶段，给静态资源加上了版本号。package.json在编译之后可以丢弃")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);